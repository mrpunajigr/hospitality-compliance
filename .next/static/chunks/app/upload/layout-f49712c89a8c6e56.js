(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6581],{3772:(e,a,t)=>{Promise.resolve().then(t.bind(t,6996))},6531:(e,a,t)=>{"use strict";t.d(a,{V9:()=>i});var n=t(5155),s=t(2115);let r=(0,s.createContext)(void 0);function i(e){let{children:a}=e,[t,i]=(0,s.useState)("web");return(0,s.useEffect)(()=>{},[]),(0,s.useEffect)(()=>{},[t]),(0,n.jsx)(r.Provider,{value:{platformMode:t,setPlatformMode:i,isIOS:"ios"===t,isWeb:"web"===t},children:(0,n.jsx)("div",{className:"Platform".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),children:a})})}},6996:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var n=t(5155),s=t(2115),r=t(5695),i=t(1811),c=t(3827),o=t(5591),d=t(5552),l=t(2124),u=t(6531);function p(e){let{children:a}=e,t=(0,r.useRouter)(),p=(0,r.usePathname)(),[g,m]=(0,s.useState)(null),[h,b]=(0,s.useState)(null),[f,x]=(0,s.useState)(!0),[v,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{let{data:{user:e}}=await i.supabase.auth.getUser();if(e){m(e);try{let a=await (0,d.LE)(e.id);a&&b(a)}catch(e){console.error("Error loading client info:",e)}}else{if(!(window.location.pathname.startsWith("/upload")||"true"===new URLSearchParams(window.location.search).get("demo")||document.cookie.includes("demo-session=active")))return t.push("/signin");m({id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a01",email:"demo@example.com",app_metadata:{},user_metadata:{full_name:"Demo User - Upload"},aud:"authenticated",role:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}x(!1)})()},[t]);let k=async()=>{await i.supabase.auth.signOut(),t.push("/")};return f?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-white border-t-transparent rounded-full"})}):(0,n.jsx)(u.V9,{children:(0,n.jsxs)("div",{className:"min-h-screen relative ContentArea",children:[(0,n.jsx)("div",{className:"fixed inset-0 -z-10",style:{background:"linear-gradient(135deg, #1e293b 0%, #374151 50%, #1e293b 100%)",backgroundAttachment:"fixed"}}),(0,n.jsx)("div",{className:"fixed inset-0 -z-10",style:{backgroundImage:"url(".concat((0,c.MJ)(),"), linear-gradient(135deg, #2d3748 0%, #4a5568 50%, #2d3748 100%)"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:.4}}),(0,n.jsx)("div",{className:"fixed inset-0 -z-10",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.02) 2px, rgba(255,255,255,0.02) 4px)",opacity:.2}}),v&&(0,n.jsx)(l.A,{selectedBackground:"",onBackgroundChange:()=>{},onClose:()=>w(!1)}),(0,n.jsx)(o.A,{user:g,userClient:h,onSignOut:k,activeSection:"upload",currentUploadPage:p.includes("/training")?"training":p.includes("/console")?"console":p.includes("/capture")?"capture":p.includes("/reports")?"reports":"console",onBackgroundSelectorToggle:()=>w(!v)}),(0,n.jsx)("div",{className:"ml-[150px] min-h-screen",children:a})]})})}}},e=>{e.O(0,[9535,8337,5552,2124,5591,8441,5964,7358],()=>e(e.s=3772)),_N_E=e.O()}]);