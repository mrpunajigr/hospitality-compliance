(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5835],{1811:(e,t,s)=>{"use strict";s.d(t,{BP:()=>g,HK:()=>h,FX:()=>p,tB:()=>x,supabase:()=>w});var a=s(5647),l=s(9535),i=s(9509);let r="https://rggdywqnvpuwssluzfud.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnZ2R5d3FudnB1d3NzbHV6ZnVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzOTIwMTAsImV4cCI6MjA2OTk2ODAxMH0.j1AiBUEfjqVxLu8ARtH5B_DBKI1dg2EKgp_VZtprAzg";if(!r||!n)throw Error("Missing Supabase environment variables. Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.");let o=(0,l.createBrowserClient)(r,n),c=i.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||i.env.SUPABASE_SERVICE_ROLE_KEY;c&&(0,a.UU)(r,c,{auth:{autoRefreshToken:!1,persistSession:!1}});let d="delivery-dockets",u=new Map,m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3600;if(arguments.length>2&&arguments[2],!e||""===e.trim()||"null"===e||"undefined"===e)return"";try{let s=e.split("/").pop()||e;console.log("\uD83D\uDD0D Generating signed URL for:",s),console.log("\uD83D\uDD0D Using bucket:",d),console.log("\uD83D\uDD0D Original path:",e);let{data:a,error:l}=await o.storage.from(d).list("",{limit:100});console.log("\uD83D\uDD0D Files in bucket:",(null==a?void 0:a.map(e=>e.name))||[]),console.log("\uD83D\uDD0D Looking for file:",s);let i=o.storage.from(d).createSignedUrl(s,t),{data:r,error:n}=await new Promise((e,t)=>{let s=setTimeout(()=>{t(Error("Timeout after ".concat(1e4,"ms")))},1e4);i.then(e).catch(t).finally(()=>clearTimeout(s))});if(n)return console.error("❌ Signed URL generation failed:",n),"";if(null==r?void 0:r.signedUrl)return console.log("✅ Signed URL generated:",r.signedUrl),r.signedUrl;return console.log("❌ No signed URL returned from Supabase"),""}catch(e){return console.error("❌ Signed URL exception:",e),""}},h=async(e,t)=>await m(e,3600,t),x=async(e,t)=>{let{data:s,error:a}=await o.from("client_users").select("role").eq("user_id",e).eq("client_id",t).eq("status","active").single();return a?(console.error("Error fetching user role:",a),null):(null==s?void 0:s.role)||null},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s="delivery-records-".concat(e,"-").concat(t);if(u.has(s))return u.get(s);let a=(async()=>{try{let s=new AbortController,a=setTimeout(()=>s.abort(),3e4),l=await fetch("/api/delivery-records?clientId=".concat(e,"&limit=").concat(t),{signal:s.signal});if(clearTimeout(a),!l.ok)throw Error("HTTP ".concat(l.status,": Failed to fetch delivery records"));let i=await l.json();if(!i.success)throw Error(i.error||"Failed to fetch delivery records");return i.data||[]}catch(t){return t instanceof Error&&"AbortError"===t.name?console.error("⏰ Delivery records request timed out for clientId:",e):console.error("❌ Error fetching delivery records for clientId:",e,t),[]}finally{u.delete(s)}})();return u.set(s,a),a},g=async e=>{let t="compliance-alerts-".concat(e);if(u.has(t))return u.get(t);let s=(async()=>{try{let t=new AbortController,s=setTimeout(()=>t.abort(),3e4),a=await fetch("/api/compliance-alerts?clientId=".concat(e),{signal:t.signal});if(clearTimeout(s),!a.ok)return console.warn("⚠️ Compliance alerts API not configured for demo mode"),[];let l=await a.json();if(!l.success)return[];return l.data||[]}catch(e){return e instanceof Error&&"AbortError"===e.name?console.warn("⏰ Compliance alerts request timed out"):console.warn("⚠️ Compliance alerts not available in demo mode"),[]}finally{u.delete(t)}})();return u.set(t,s),s};var f=s(9509);let b=null;try{let e="https://rggdywqnvpuwssluzfud.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnZ2R5d3FudnB1d3NzbHV6ZnVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzOTIwMTAsImV4cCI6MjA2OTk2ODAxMH0.j1AiBUEfjqVxLu8ARtH5B_DBKI1dg2EKgp_VZtprAzg",s=f.env.SUPABASE_SERVICE_ROLE_KEY;e&&t&&(b=(0,a.UU)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"hospitality-compliance-auth"}})),e&&s&&(0,a.UU)(e,s,{auth:{autoRefreshToken:!1,persistSession:!1}})}catch(e){console.warn("Supabase client initialization failed:",e instanceof Error?e.message:"Unknown error")}let w=b;console.log("\uD83D\uDE80 Database Core lib loaded - Modular Architecture v1.8.19")},3152:(e,t,s)=>{Promise.resolve().then(s.bind(s,9566))},3827:(e,t,s)=>{"use strict";s.d(t,{Bo:()=>r,MJ:()=>n,NO:()=>c});let a="https://rggdywqnvpuwssluzfud.supabase.co",l={UI_ICONS:"ui-icons",MODULE_ASSETS:"module-assets"};function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a)return console.warn("SUPABASE_URL not configured, falling back to local images"),"/fallback-".concat(t);let{width:l,height:i,quality:r=85,format:n="webp"}=s,o="".concat(a,"/storage/v1/object/public/").concat(e,"/").concat(t),c=[];return l&&c.push("width=".concat(l)),i&&c.push("height=".concat(i)),85!==r&&c.push("quality=".concat(r)),"auto"!==n&&c.push("format=".concat(n)),c.length>0&&(o+="?".concat(c.join("&"))),o}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.replace(/\.(png|jpg|jpeg|webp|svg)$/i,"");return i(l.MODULE_ASSETS,"".concat(s,".png"),{format:"webp",quality:85,...t})}function n(){return i(l.MODULE_ASSETS,"backgrounds/chef-workspace.jpg",{format:"webp",quality:75,width:1920,height:1080})}let o={JiGRupload:"navigation/JiGRupload",JiGRcamera:"navigation/JiGRcamera",JiGRmodules:"navigation/JiGRmodules",JiGRadmin:"navigation/JiGRadmin",JiGRsignout:"navigation/JiGRsignout",JiGRbulk:"actions/JiGRbulk",JiGRqueue:"actions/JiGRqueue",JiGRsummary:"actions/JiGRsummary",JiGRwarning:"actions/JiGRwarning",JiGRStats:"actions/JiGRStats",JiGRdiaryWhite:"modules/JiGRdiaryWhite",JiGRstockWhite:"modules/JiGRstockWhite",JiGRuploadWhite:"modules/JiGRuploadWhite",JiGRtemp:"modules/JiGRtemp",JiGRrepairs:"modules/JiGRrepairs",JiGRmenus:"modules/JiGRmenus",JiGRrecipes:"modules/JiGRrecipes",JiGRstocktake:"modules/JiGRstocktake",JiGRadmin2:"modules/JiGRadmin2",JiGRcompliance:"modules/JiGRcompliance",JiGRmenu:"modules/JiGRmenu"};function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,s=o[e];return s?i(l.UI_ICONS,"".concat(s,".png"),{width:t,height:t,format:"webp",quality:90}):(console.warn("Icon mapping not found for: ".concat(e)),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,s=e.replace(/\.(png|jpg|jpeg|webp|svg)$/i,"");return i(l.UI_ICONS,"".concat(s,".png"),{width:t,height:t,format:"webp",quality:90})}(e,t))}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"redirect")&&s.d(t,{redirect:function(){return a.redirect}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9566:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),l=s(2115),i=s(5695),r=s(1811),n=s(8337),o=s(3827),c=s(6766),d=s(66);function u(){var e;let[t,s]=(0,l.useState)(null),[u,m]=(0,l.useState)(null),[h,x]=(0,l.useState)(!0),[p,g]=(0,l.useState)([]),[f,b]=(0,l.useState)(!1),[w,v]=(0,l.useState)(!1),[j,N]=(0,l.useState)([]),[y,R]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!1);if((0,i.useRouter)(),(0,l.useEffect)(()=>{(async()=>{let{data:{user:e}}=await r.supabase.auth.getUser();if(e){s(e),console.log("\uD83D\uDD0D AUTH DEBUG: User found:",e.email,e.id);try{let{data:t,error:s}=await r.supabase.from("client_users").select("\n              role,\n              status,\n              clients (\n                id,\n                name,\n                business_type,\n                business_email,\n                subscription_status\n              )\n            ").eq("user_id",e.id).eq("status","active").limit(1);if(console.log("\uD83D\uDD0D AUTH DEBUG: Client-user lookup result:",t,s),t&&t.length>0&&!s&&t[0].clients){let e={id:t[0].clients.id,name:t[0].clients.name,role:t[0].role,email:t[0].clients.business_email};m(e),console.log("✅ AUTH DEBUG: Client found via junction table:",e.name,e.id)}else{console.error("❌ AUTH DEBUG: No active client relationship found:",s);let{data:t}=await r.supabase.from("client_users").select("role, status, clients(name)").eq("user_id",e.id);console.log("\uD83D\uDD0D AUTH DEBUG: User client relationships:",t)}}catch(e){console.error("\uD83D\uDEA8 AUTH DEBUG: Database error:",e)}}else(window.location.pathname.startsWith("/compliance")||"true"===new URLSearchParams(window.location.search).get("demo")||document.cookie.includes("demo-session=active"))&&(console.log("\uD83D\uDE80 Upload Action demo mode detected"),s({id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a01",email:"demo@example.com",app_metadata:{},user_metadata:{full_name:"Demo User - Upload Action"},aud:"authenticated",role:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));x(!1)})()},[]),(0,l.useEffect)(()=>{(async()=>{if(t)try{let e=new Date().toISOString().split("T")[0],{data:t,error:s}=await r.supabase.from("delivery_records").select("*").gte("created_at","".concat(e,"T00:00:00")).lt("created_at","".concat(e,"T23:59:59")).order("created_at",{ascending:!1}).limit(10);t&&!s&&(g(t),console.log("\uD83D\uDCCA Loaded ".concat(t.length," uploads from today")))}catch(e){console.error("❌ Failed to load today's uploads:",e)}})()},[t]),h)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)("div",{className:(0,n.ed)("primary"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-white border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white font-medium",children:"Loading Upload Action..."})]})})})});let S=async()=>{if(0!==j.length){console.log("\uD83D\uDE80 Processing ".concat(j.length," files with AI extraction")),R(!0);try{let s=[];for(let a of j){console.log("\uD83D\uDCC4 Processing: ".concat(a.file.name));let l=new FormData;l.append("file",a.file),l.append("clientId",(null==u?void 0:u.id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"),l.append("userId",(null==t?void 0:t.id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10"),l.append("qualityScore",a.qualityReport.score.toString()),console.log("\uD83D\uDCE1 Calling /api/upload-docket for ".concat(a.file.name));let i=await fetch("/api/upload-docket",{method:"POST",body:l});if(console.log("\uD83D\uDCE1 Response status: ".concat(i.status," ").concat(i.statusText)),!i.ok){let e=await i.text();throw console.error("❌ API Error Details:",e),Error("Upload failed (".concat(i.status,"): ").concat(e))}let r=await i.json();if(console.log("✅ AI Processing complete:",r),s.push(r),r.enhancedExtraction){var e;let t={id:r.deliveryRecordId||Date.now(),supplier_name:(null==(e=r.enhancedExtraction.supplier)?void 0:e.value)||"Unknown Supplier",created_at:new Date().toISOString(),image_path:URL.createObjectURL(a.file),ai_extraction:r.enhancedExtraction};g(e=>[t,...e])}}N([]),b(!0),E(!0),console.log("\uD83C\uDF89 Successfully processed ".concat(s.length," documents")),setTimeout(()=>{E(!1)},3e3),setTimeout(()=>{b(!1)},6e3)}catch(t){console.error("❌ Processing failed:",t);let e=t instanceof Error?t.message:"Unknown error occurred";alert("Processing failed: ".concat(e))}finally{R(!1)}}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-8",children:[(0,a.jsx)("div",{className:"mb-16",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 col-span-2",children:[(0,a.jsx)(c.default,{src:(0,o.Bo)("icons/JiGRupload",{width:96,height:96}),alt:"Upload Module",width:96,height:96,className:"object-contain"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"".concat((0,n.$$)("pageTitle")," text-white drop-shadow-lg text-4xl font-bold"),children:"UPLOAD"}),(0,a.jsx)("p",{className:"text-white/80 drop-shadow-md italic text-xs",children:"Document upload, processing, and compliance management"}),u&&(0,a.jsxs)("p",{className:"text-blue-300 text-sm mt-1",children:[u.name," • ",u.role]}),t&&!u&&(0,a.jsxs)("p",{className:"text-blue-300 text-sm mt-1",children:[(null==(e=t.user_metadata)?void 0:e.full_name)||t.email," • Demo Mode"]})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"flex space-x-1 bg-black/20 p-0.5 rounded-full backdrop-blur-md border border-white/20",children:[(0,a.jsx)("a",{href:"/upload/console",className:"px-4 py-2 font-medium text-white/90 hover:text-white hover:bg-white/20 rounded-full transition-all duration-300 text-sm",children:"Console"}),(0,a.jsx)("a",{href:"/upload/capture",className:"px-4 py-2 font-semibold text-black bg-white rounded-full transition-all duration-300 text-sm",children:"Capture"}),(0,a.jsx)("a",{href:"/upload/reports",className:"px-4 py-2 font-medium text-white/90 hover:text-white hover:bg-white/20 rounded-full transition-all duration-300 text-sm",children:"Reports"})]})}),(0,a.jsx)("div",{})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 AdaptiveLayout",children:[(0,a.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg border border-white/20 rounded-3xl p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-500/10 rounded-full -mr-10 -mt-10"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,a.jsx)("h2",{className:"text-white text-lg font-semibold text-center w-full",children:"Quick Capture"})}),(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsx)("img",{src:(0,o.NO)("JiGRcamera",64),alt:"Camera",className:"w-16 h-16 object-contain mx-auto mb-4"})}),(0,a.jsx)("div",{className:"w-full rounded-xl relative overflow-hidden",children:(0,a.jsx)("button",{"data-camera-trigger":!0,onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.capture="environment",e.onchange=async e=>{var s,a;let l=null==(s=e.target.files)?void 0:s[0];if(l){console.log("\uD83D\uDCF8 Camera capture file selected:",l.name);try{let e=new FormData;e.append("file",l),e.append("clientId",(null==u?void 0:u.id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"),e.append("userId",(null==t?void 0:t.id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a10"),e.append("qualityScore","85"),console.log("\uD83D\uDCE1 Processing camera capture via /api/upload-docket");let s=await fetch("/api/upload-docket",{method:"POST",body:e});if(!s.ok){let e=await s.text();console.error("❌ Camera capture processing failed:",e),alert("Camera capture failed: ".concat(e));return}let i=await s.json();if(console.log("✅ Camera capture processed successfully:",i),i.enhancedExtraction){let e={id:i.deliveryRecordId||Date.now(),supplier_name:(null==(a=i.enhancedExtraction.supplier)?void 0:a.value)||"Unknown Supplier",created_at:new Date().toISOString(),image_path:URL.createObjectURL(l),ai_extraction:i.enhancedExtraction};g(t=>[e,...t]),b(!0),setTimeout(()=>b(!1),6e3)}}catch(e){console.error("❌ Camera capture processing error:",e),alert("Camera capture failed: ".concat(e instanceof Error?e.message:"Unknown error"))}}},e.click()},className:"w-full text-white py-3 px-4 transition-all duration-300 text-sm font-semibold bg-white/5 hover:bg-white/15 border border-white/20 rounded-xl hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02] active:scale-[0.98] TouchTarget",children:"Camera Capture"})}),(0,a.jsx)("p",{className:"text-blue-200 text-xs mt-2 text-center",children:"Single document capture"})]})]}),(0,a.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg border border-white/20 rounded-3xl p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-purple-500/10 rounded-full -mr-10 -mt-10"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,a.jsx)("h2",{className:"text-white text-lg font-semibold text-center w-full",children:"Bulk Upload"})}),(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsx)("img",{src:(0,o.NO)("JiGRbulk",64),alt:"Bulk Upload",className:"w-16 h-16 object-contain mx-auto mb-4"})}),(0,a.jsx)("div",{className:"w-full rounded-xl relative overflow-hidden",children:(0,a.jsx)("button",{onClick:()=>v(!0),className:"w-full text-white py-3 px-4 transition-all duration-300 text-sm font-semibold bg-white/5 hover:bg-white/15 border border-white/20 rounded-xl hover:shadow-lg hover:shadow-purple-500/10 hover:scale-[1.02] active:scale-[0.98] TouchTarget",children:"Select Files"})}),(0,a.jsx)("p",{className:"text-purple-200 text-xs mt-2 text-center",children:"Multiple file upload with quality validation"}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/10",children:[(0,a.jsx)("p",{className:"text-purple-200/70 text-xs text-center",children:"PNG, JPG, PDF, HEIC"}),(0,a.jsx)("p",{className:"text-purple-200/70 text-xs text-center",children:"Max 8MB each • OCR optimized"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg border border-white/20 rounded-3xl p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-green-500/10 rounded-full -mr-10 -mt-10"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,a.jsx)("h2",{className:"text-white text-lg font-semibold text-center w-full",children:"Ready Queue"})}),(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsx)("img",{src:(0,o.NO)("JiGRqueue",64),alt:"Queue",className:"w-16 h-16 object-contain mx-auto mb-4"})}),(0,a.jsx)("div",{className:"w-full rounded-xl relative overflow-hidden mb-4 ".concat(0===j.length?"opacity-50":""),children:(0,a.jsx)("button",{disabled:0===j.length||y||k,onClick:S,className:"w-full py-3 px-4 text-sm font-semibold transition-all duration-300 border rounded-xl TouchTarget ".concat(k?"text-green-400 bg-green-500/20 border-green-400/40 shadow-lg shadow-green-500/20":0===j.length||y?"text-green-300/50 cursor-not-allowed bg-white/5 border-white/10":"text-green-300 bg-white/5 hover:bg-white/15 border-white/20 hover:shadow-lg hover:shadow-green-500/10 hover:scale-[1.02] active:scale-[0.98]"),children:k?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("span",{children:"Processing Complete!"})]}):y?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-green-300 border-t-transparent rounded-full"}),(0,a.jsx)("span",{children:"Processing AI..."})]}):"Process Queue"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-white",children:j.length}),(0,a.jsx)("div",{className:"text-green-200 text-xs",children:"images ready"})]})]})]})]}),w&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:(0,a.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg border border-white/20 rounded-3xl p-8 relative overflow-hidden lg:col-span-3",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-purple-500/10 rounded-full -mr-10 -mt-10"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-bold",children:"Quality-Enhanced Upload"}),(0,a.jsx)("button",{onClick:()=>v(!1),className:"text-white/70 hover:text-white transition-colors duration-200 p-1 hover:bg-white/10 rounded-md",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{"data-file-upload":!0,children:(0,a.jsx)(d.A,{onFileValidated:(e,t)=>{console.log("File validated for OCR:",e.name,"Quality score:",t.score),N(s=>[...s,{file:e,qualityReport:t}]),E(!1)},onFileRejected:(e,t)=>{console.log("File rejected due to poor quality:",e.name,"Quality score:",t.score)},allowPoorQuality:!0,className:"mb-6"})}),j.length>0&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-white/20",children:[(0,a.jsxs)("h4",{className:"text-white text-sm font-medium mb-4",children:["Quality Validated Files (",j.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:j.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white/10 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium",children:e.file.name}),(0,a.jsxs)("p",{className:"text-white/60 text-xs",children:["Quality: ",e.qualityReport.score,"% • ",(e.file.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,a.jsx)("button",{onClick:()=>{N(e=>e.filter((e,s)=>s!==t))},className:"text-red-400 hover:text-red-300 transition-colors duration-200 p-1 hover:bg-red-500/10 rounded-md",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t))})]})]})]})}),p.length>0&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.slice(0,8).map((e,t)=>(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white/10 rounded-lg overflow-hidden flex-shrink-0",children:e.image_path?(0,a.jsx)("img",{src:e.image_path,alt:"Upload",className:"w-full h-full object-cover",onError:e=>{var t;let s=e.currentTarget;s.style.display="none";let a=document.createElement("div");a.className="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center",a.innerHTML='<div class="text-white/60 text-sm">\uD83D\uDCC4</div>',null==(t=s.parentNode)||t.appendChild(a)}}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white/60 text-sm",children:"\uD83D\uDCC4"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("completed"===e.processing_status?"bg-green-400":"bg-yellow-400")}),(0,a.jsx)("span",{className:"text-xs text-white/80 font-medium",children:"completed"===e.processing_status?"Success":"Processing"})]}),(0,a.jsx)("div",{className:"text-white text-sm font-medium truncate",children:e.supplier_name||"Unknown"})]})]})},e.id||t))})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg border border-white/20 rounded-3xl p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-yellow-500/10 rounded-full -mr-10 -mt-10"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,a.jsx)("h2",{className:"text-white text-lg font-semibold text-center w-full",children:"Capture Tips"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white/60 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:"Ensure good lighting for clear text"})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white/60 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:"Keep document flat and straight"})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white/60 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:"Include full document in frame"})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white/60 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:"Avoid shadows and glare"})]})]})]})]})})})})]})}}},e=>{e.O(0,[9535,6766,8337,66,8441,5964,7358],()=>e(e.s=3152)),_N_E=e.O()}]);