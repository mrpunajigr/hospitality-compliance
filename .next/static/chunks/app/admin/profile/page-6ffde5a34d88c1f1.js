(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8808],{424:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155),l=a(2115);let r={small:"w-16 h-16",medium:"w-24 h-24",large:"w-32 h-32"};function n(e){let{currentImageUrl:t,onUploadSuccess:a,onUploadError:n,uploadEndpoint:i,uploadData:d,acceptedTypes:o=["image/jpeg","image/png","image/webp"],maxSizeMB:c=5,shape:m="circle",size:u="medium",title:x="Upload Image",description:h="Click to upload or drag and drop"}=e,[p,b]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),[j,v]=(0,l.useState)(null),w=(0,l.useRef)(null),y=async e=>{if(!o.includes(e.type))return void n("Invalid file type. Accepted types: ".concat(o.join(", ")));if(e.size>1024*c*1024)return void n("File too large. Maximum size is ".concat(c,"MB"));let t=new FileReader;t.onload=()=>v(t.result),t.readAsDataURL(e),b(!0);try{let t=new FormData;t.append("file",e),Object.entries(d).forEach(e=>{let[a,s]=e;t.append(a,s)});let s=await fetch(i,{method:"POST",body:t}),l=await s.json();if(!s.ok)throw Error(l.error||"Upload failed");a(l.avatar_url||l.logo_url),v(null)}catch(e){console.error("Upload error:",e),n(e instanceof Error?e.message:"Upload failed"),v(null)}finally{b(!1)}},N=(e,t)=>{e.preventDefault(),e.stopPropagation(),g(t)},k=j||t,D=r[u];return(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsxs)("div",{className:"".concat(D," ").concat("circle"===m?"rounded-full":"rounded-lg"," bg-white/20 backdrop-blur-sm border-2 border-dashed border-white/30 overflow-hidden cursor-pointer transition-all duration-200 hover:border-white/50 ").concat(f?"border-blue-400 bg-blue-50/20":""," ").concat(p?"opacity-50":""),onDrop:e=>{e.preventDefault(),e.stopPropagation(),g(!1);let t=Array.from(e.dataTransfer.files);t.length>0&&y(t[0])},onDragOver:e=>N(e,!0),onDragEnter:e=>N(e,!0),onDragLeave:e=>N(e,!1),onClick:()=>{var e;null==(e=w.current)||e.click()},children:[k?(0,s.jsx)("img",{src:k,alt:"Preview",className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-white/60 text-center",children:[(0,s.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsx)("p",{className:"text-xs",children:"Upload"})]})}),p&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-inherit",children:(0,s.jsx)("div",{className:"animate-spin h-6 w-6 border-2 border-white border-t-transparent rounded-full"})})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-white mb-1",children:x}),(0,s.jsx)("p",{className:"text-xs text-white/60",children:h}),(0,s.jsxs)("p",{className:"text-xs text-white/50 mt-1",children:[o.map(e=>e.split("/")[1].toUpperCase()).join(", ")," • Max ",c,"MB"]})]}),(0,s.jsx)("input",{ref:w,type:"file",accept:o.join(","),onChange:e=>{let t=e.target.files;t&&t.length>0&&y(t[0])},className:"hidden"})]})}},2103:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),l=a(2115),r=a(5695),n=a(1811),i=a(424),d=a(5552),o=a(9175),c=a(8337);function m(){let[e,t]=(0,l.useState)(null),[a,m]=(0,l.useState)(null),[u,x]=(0,l.useState)(!0),[h,p]=(0,l.useState)(null),[b,f]=(0,l.useState)(null);(0,r.useRouter)(),(0,l.useEffect)(()=>{(async()=>{var e,a;let{data:{user:s}}=await n.supabase.auth.getUser();if(s){t(s);try{let e=await (0,d.LE)(s.id);e&&m(e)}catch(e){console.error("Error loading client info:",e)}let{data:e,error:l}=await n.supabase.from("profiles").select("*").eq("id",s.id).single();!l&&e?(p(e),f(e.avatar_url)):p({id:s.id,email:s.email||"demo@example.com",full_name:(null==(a=s.user_metadata)?void 0:a.full_name)||"Demo User",avatar_url:null,phone:"+64 21 123 4567"})}else{let a={id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a01",email:"demo@example.com",app_metadata:{},user_metadata:{full_name:"Demo User"},aud:"authenticated",role:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(a),p({id:a.id,email:a.email,full_name:(null==(e=a.user_metadata)?void 0:e.full_name)||"Demo User",avatar_url:null,phone:"+64 21 123 4567"})}x(!1)})();let{data:{subscription:e}}=n.supabase.auth.onAuthStateChange((e,a)=>{(null==a?void 0:a.user)&&t(a.user)});return()=>e.unsubscribe()},[]);let g=async()=>{try{let{data:e,error:a}=await n.supabase.auth.signInAnonymously();if(!a&&e.user)return void console.log("Anonymous demo user signed in successfully");let s={id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a01",email:"demo@example.com",app_metadata:{},user_metadata:{full_name:"Demo User"},aud:"authenticated",role:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(s)}catch(e){console.error("Demo sign in error:",e),t({id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a01",email:"demo@example.com",app_metadata:{},user_metadata:{full_name:"Demo User"},aud:"authenticated",role:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}};return u?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:(0,c.ed)("primary"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-white border-t-transparent rounded-full mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white font-medium",children:"Loading Profile..."})]})})}):e?(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"".concat((0,c.$$)("pageTitle")," drop-shadow-lg"),children:"Profile Settings"}),(0,s.jsx)("p",{className:"".concat((0,c.$$)("bodySmall")," drop-shadow-md"),children:"Manage your personal account information"}),a&&(0,s.jsxs)("div",{className:"".concat((0,c.$$)("meta")," text-white/80 drop-shadow-md mt-1"),children:[a.name," • ",a.role]})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"".concat((0,c.ed)("form")," mb-6"),children:[(0,s.jsxs)("div",{className:"flex items-start space-x-6 mb-6",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(i.A,{currentImageUrl:b,onUploadSuccess:e=>{f(e),alert("Avatar updated successfully!")},onUploadError:e=>{console.error("Avatar upload error:",e),alert("Avatar upload failed: ".concat(e))},uploadEndpoint:"/api/upload-avatar",uploadData:{userId:(null==e?void 0:e.id)||""},acceptedTypes:["image/jpeg","image/png","image/webp","image/gif"],maxSizeMB:5,shape:"circle",size:"large",title:"Profile Picture",description:"Click to change avatar"})}),(0,s.jsxs)("div",{className:"flex-1 pt-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:(null==h?void 0:h.full_name)||"Demo User"}),(0,s.jsx)("p",{className:"text-gray-700",children:(null==h?void 0:h.email)||"demo@example.com"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Administrator • Demo Restaurant Ltd"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"47"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Documents Uploaded"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"12"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Days Active"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"98%"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Compliance Rate"})]})]})]}),(0,s.jsxs)("div",{className:"".concat((0,c.ed)("form")," mb-6"),children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Personal Information"}),(0,s.jsxs)("form",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",defaultValue:(null==h?void 0:h.full_name)||"Demo User",className:"w-full px-4 py-3 bg-white/30 border border-white/30 rounded-xl text-gray-900 placeholder-gray-600 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Email Address"}),(0,s.jsx)("input",{type:"email",defaultValue:(null==h?void 0:h.email)||"demo@example.com",className:"w-full px-4 py-3 bg-white/30 border border-white/30 rounded-xl text-gray-900 placeholder-gray-600 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Phone Number"}),(0,s.jsx)("input",{type:"tel",defaultValue:(null==h?void 0:h.phone)||"+64 21 123 4567",className:"w-full px-4 py-3 bg-white/30 border border-white/30 rounded-xl text-gray-900 placeholder-gray-600 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Timezone"}),(0,s.jsxs)("select",{className:"w-full px-4 py-3 bg-white/30 border border-white/30 rounded-xl text-gray-900 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"Pacific/Auckland",children:"New Zealand (NZST)"}),(0,s.jsx)("option",{value:"Australia/Sydney",children:"Australia (AEST)"}),(0,s.jsx)("option",{value:"UTC",children:"UTC"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)("button",{type:"button",className:"bg-white/20 hover:bg-white/30 text-gray-900 font-medium py-3 px-6 rounded-xl transition-all duration-200 border border-white/30 backdrop-blur-sm",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:"Save Changes"})]})]})]}),(0,s.jsxs)("div",{className:"".concat((0,c.ed)("form")," mb-6"),children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Password & Security"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Current Password"}),(0,s.jsx)("input",{type:"password",placeholder:"Enter current password",className:"w-full px-4 py-3 bg-white/30 border border-white/30 rounded-xl text-gray-900 placeholder-gray-600 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"New Password"}),(0,s.jsx)("input",{type:"password",placeholder:"Enter new password",className:"w-full px-4 py-3 bg-white/30 border border-white/30 rounded-xl text-gray-900 placeholder-gray-600 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 bg-white/30 border border-white/30 rounded-xl text-gray-900 placeholder-gray-600 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,s.jsxs)("div",{className:"bg-white/20 rounded-xl p-4 border border-white/20",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Two-Factor Authentication"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:"Add an extra layer of security to your account"}),(0,s.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200",children:"Enable 2FA"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:"Update Password"})})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-lg border border-white/40 rounded-2xl p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Activity"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/20 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"Uploaded delivery document"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Today at 2:15 PM"})]}),(0,s.jsx)("div",{className:"text-green-400",children:"✓"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/20 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"Generated weekly report"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Yesterday at 11:30 AM"})]}),(0,s.jsx)("div",{className:"text-blue-400",children:"\uD83D\uDCC4"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/20 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"Signed in from new device"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"2 days ago at 9:45 AM"})]}),(0,s.jsx)("div",{className:"text-yellow-400",children:"\uD83D\uDD11"})]})]})]})]}),(0,s.jsx)("div",{className:"w-64",children:(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-lg border border-white/40 rounded-2xl p-6 shadow-lg sticky top-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Account Actions"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:"block w-full mb-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-4 px-6 rounded-xl transition-all duration-200 text-left",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Download My Data"}),(0,s.jsx)("p",{className:"text-sm text-blue-100 mt-1",children:"Export all your data"})]})}),(0,s.jsx)("button",{className:"block w-full mb-4 bg-yellow-600 hover:bg-yellow-700 text-white font-medium py-4 px-6 rounded-xl transition-all duration-200 text-left",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Sign Out All Devices"}),(0,s.jsx)("p",{className:"text-sm text-yellow-100 mt-1",children:"Security action"})]})}),(0,s.jsx)("button",{className:"block w-full bg-red-600 hover:bg-red-700 text-white font-medium py-4 px-6 rounded-xl transition-all duration-200 text-left",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Delete Account"}),(0,s.jsx)("p",{className:"text-sm text-red-100 mt-1",children:"Permanent action"})]})})]})]})})]}),(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsx)("span",{className:"".concat((0,c.$$)("version")," text-white/60"),children:(0,o.VM)("short")})})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4",children:(0,s.jsx)("div",{className:"".concat((0,c.ed)("primary")," max-w-md w-full"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"".concat((0,c.$$)("pageTitle")," mb-2"),children:"User Profile"}),(0,s.jsx)("p",{className:"".concat((0,c.$$)("bodySmall")," mb-6"),children:"Please sign in to view your profile"}),(0,s.jsx)("button",{onClick:g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] mb-4",children:"Sign In as Demo User"}),(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:(0,s.jsx)("p",{className:"text-xs text-white/70",children:"Demo mode with test profile data"})})]})})})}},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"redirect")&&a.d(t,{redirect:function(){return s.redirect}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},8099:(e,t,a)=>{Promise.resolve().then(a.bind(a,2103))},9175:(e,t,a)=>{"use strict";a.d(t,{VM:()=>d});let s={major:1,month:9,day:5,build:13,alpha:""},l="".concat(s.major,".").concat(s.month,".").concat(s.day,".").concat(String(s.build).padStart(3,"0")).concat(s.alpha),r="".concat(s.major,".").concat(s.month,".").concat(s.day).concat(s.alpha),n=new Date().toISOString().split("T")[0],i="production";parseInt(l.split(".")[0]),parseInt(l.split(".")[1]),l.split(".")[2];let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"short",t="v".concat(l);switch(e){case"short":default:return t;case"full":return"".concat(t," (").concat(n,")");case"detailed":return"".concat(t," (").concat(i,") - Built: ").concat(n);case"dev":return"".concat(t," | ").concat(i.toUpperCase());case"prod":return"v".concat(r)}}}},e=>{e.O(0,[9535,8337,5552,8441,5964,7358],()=>e(e.s=8099)),_N_E=e.O()}]);