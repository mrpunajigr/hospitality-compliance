(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8938],{5485:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(5155),r=t(2115);function l(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0),[d,n]=(0,r.useState)(!1),o=async()=>{try{l(!0);let e=await fetch("/api/test-data?action=stats"),t=await e.json();t.success?s(t.stats):console.error("Failed to load test data stats:",t.error)}catch(e){console.error("Error loading test data stats:",e)}finally{l(!1)}},i=async()=>{if(confirm("Are you sure you want to delete ALL test data? This cannot be undone."))try{n(!0);let e=await fetch("/api/test-data?action=all",{method:"DELETE"}),s=await e.json();s.success?(alert(s.message),o()):alert("Cleanup failed: "+s.error)}catch(e){console.error("Error cleaning up test data:",e),alert("Cleanup failed: "+e)}finally{n(!1)}},c=async e=>{if(confirm("Are you sure you want to delete test session ".concat(e,"?")))try{let s=await fetch("/api/test-data?action=session&sessionId=".concat(e),{method:"DELETE"}),t=await s.json();t.success?(alert(t.message),o()):alert("Session cleanup failed: "+t.error)}catch(e){console.error("Error cleaning up session:",e),alert("Session cleanup failed: "+e)}};return((0,r.useEffect)(()=>{o()},[]),t)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading test data statistics..."})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Test Data Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"View and manage test records created during development and testing"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Total Test Records"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:(null==e?void 0:e.totalTestRecords)||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Test Sessions"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:(null==e?void 0:e.testSessions)||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Status"}),(0,a.jsx)("p",{className:"text-sm text-green-600 font-medium",children:(null==e?void 0:e.totalTestRecords)===0?"No test data":"".concat(null==e?void 0:e.totalTestRecords," test records")})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"\uD83D\uDD04 Refresh Stats"}),(0,a.jsx)("button",{onClick:i,disabled:d||(null==e?void 0:e.totalTestRecords)===0,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"⏳ Cleaning...":"\uD83D\uDDD1️ Clean All Test Data"})]})]}),(null==e?void 0:e.sessionGroups)&&Object.keys(e.sessionGroups).length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Test Sessions"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(e.sessionGroups).map(e=>{var s;let[t,r]=e;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900",children:["Session: ",t]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[r.length," record",1!==r.length?"s":""]})]}),(0,a.jsx)("button",{onClick:()=>c(t),className:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:"Delete Session"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsxs)("p",{children:["Latest record: ",new Date(null==(s=r[0])?void 0:s.created_at).toLocaleString()]}),(0,a.jsxs)("p",{children:["Suppliers: ",r.map(e=>e.supplier_name||"Unknown").join(", ")]})]})]},t)})})]}),(null==e?void 0:e.totalTestRecords)===0&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"✅ No Test Data"}),(0,a.jsx)("p",{className:"text-green-700",children:"All clean! No test records found in the database."})]})]})})}},6845:(e,s,t)=>{Promise.resolve().then(t.bind(t,5485))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=6845)),_N_E=e.O()}]);