(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3099],{5880:(e,a,t)=>{Promise.resolve().then(t.bind(t,9176))},9176:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var n=t(5155),o=t(5695),s=t(2115),i=t(1811);function l(){let[e,a]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=()=>{window.APP_VERSION?a({version:window.APP_VERSION,buildTime:window.BUILD_TIME,env:window.BUILD_ENV}):setTimeout(e,100)};e()},[]),null}var c=t(5552),r=t(2124),d=t(5591);function u(e){let{children:a}=e;(0,o.usePathname)();let[t,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(null),[g,w]=(0,s.useState)(null),[b,p]=(0,s.useState)(null),[f,S]=(0,s.useState)("/chef-workspace1jpg.jpg"),[_,k]=(0,s.useState)(!1),[v,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{let{data:{user:e}}=await i.supabase.auth.getUser();if(!e){if(window.location.pathname.startsWith("/console")){console.log("\uD83D\uDE80 Console page accessed - enabling demo mode"),u({id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a01",email:"demo@example.com",app_metadata:{},user_metadata:{full_name:"Demo User"},aud:"authenticated",role:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return}window.location.pathname.startsWith("/console")||(window.location.href="/signin?redirectTo=".concat(encodeURIComponent(window.location.pathname)));return}u(e);try{let a=await (0,c.LE)(e.id);a?(h(a),console.log("✅ Company loaded:",a.name)):console.log("ℹ️ User has no associated company - company setup needed")}catch(e){console.log("ℹ️ Company association not found - this is normal for users without companies")}})()},[]),(0,s.useEffect)(()=>{x(!0)},[]);let E=async()=>{await i.supabase.auth.signOut(),window.location.href="/signin"};return(0,n.jsxs)("div",{className:"min-h-screen relative overflow-hidden",children:[(0,n.jsx)(l,{}),(0,n.jsx)("div",{className:"absolute inset-0 bg-cover bg-no-repeat",style:{backgroundImage:"url('".concat(f,"')"),backgroundPosition:"50% 50%",backgroundAttachment:"fixed",filter:"brightness(0.7)"}}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 via-black/30 to-black/50"}),(0,n.jsx)(d.A,{user:t,userClient:m,onSignOut:E,logoUrl:b||void 0,activeSection:"console",onBackgroundSelectorToggle:()=>k(!0)}),(0,n.jsx)("div",{className:"ml-[150px] min-h-screen transition-all duration-300",children:(0,n.jsx)("main",{className:"min-h-screen p-4 md:p-6",children:a})}),_&&(0,n.jsx)(r.A,{selectedBackground:f,onBackgroundChange:e=>{S(e.file_url),k(!1)},onClose:()=>k(!1),theme:"dark"})]})}}},e=>{e.O(0,[9535,8337,5552,2124,5591,8441,5964,7358],()=>e(e.s=5880)),_N_E=e.O()}]);