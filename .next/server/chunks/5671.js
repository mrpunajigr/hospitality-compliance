exports.id=5671,exports.ids=[5671],exports.modules={14038:(a,b,c)=>{"use strict";c.r(b),c.d(b,{getUserClient:()=>e,userHasClientAccess:()=>f});var d=c(66143);async function e(a){try{let{data:b,error:c}=await d.supabase.from("client_users").select(`
        client_id,
        role,
        status,
        clients (
          id,
          name
        )
      `).eq("user_id",a).eq("status","active").single();if(c||!b||!b.clients)return c?console.log("ℹ️ User client lookup result:",c.message||"No client association found"):console.log("ℹ️ User has no active client association"),null;let e=Array.isArray(b.clients)?b.clients[0]:b.clients,{data:f,error:g}=await d.supabase.from("clients").select("*").eq("id",e.id).single();if(g)return console.log("ℹ️ Client details lookup result:",g.message||"Unable to fetch extended client details"),{id:e.id,name:e.name,role:b.role,status:b.status};return{id:e.id,name:e.name,role:b.role,status:b.status,business_type:f.business_type,business_email:f.business_email,phone:f.phone,address:f.address,license_number:f.license_number,subscription_status:f.subscription_status,subscription_tier:f.subscription_tier,onboarding_status:f.onboarding_status,estimated_monthly_deliveries:f.estimated_monthly_deliveries}}catch(a){return console.log("ℹ️ getUserClient exception:",a instanceof Error?a.message:"Unknown error occurred"),null}}async function f(a,b){try{let{data:c,error:e}=await d.supabase.from("client_users").select("id").eq("user_id",a).eq("client_id",b).eq("status","active").single();return!e&&!!c}catch(a){return!1}}},19281:(a,b,c)=>{"use strict";c.d(b,{Bo:()=>g,MJ:()=>h,NO:()=>j});let d="https://rggdywqnvpuwssluzfud.supabase.co",e={UI_ICONS:"ui-icons",MODULE_ASSETS:"module-assets"};function f(a,b,c={}){if(!d)return console.warn("SUPABASE_URL not configured, falling back to local images"),`/fallback-${b}`;let{width:e,height:g,quality:h=85,format:i="webp"}=c,j=`${d}/storage/v1/object/public/${a}/${b}`,k=[];return e&&k.push(`width=${e}`),g&&k.push(`height=${g}`),85!==h&&k.push(`quality=${h}`),"auto"!==i&&k.push(`format=${i}`),k.length>0&&(j+=`?${k.join("&")}`),j}function g(a,b={}){let c=a.replace(/\.(png|jpg|jpeg|webp|svg)$/i,"");return f(e.MODULE_ASSETS,`${c}.png`,{format:"webp",quality:85,...b})}function h(){return f(e.MODULE_ASSETS,"backgrounds/chef-workspace.jpg",{format:"webp",quality:75,width:1920,height:1080})}let i={JiGRupload:"navigation/JiGRupload",JiGRcamera:"navigation/JiGRcamera",JiGRmodules:"navigation/JiGRmodules",JiGRadmin:"navigation/JiGRadmin",JiGRsignout:"navigation/JiGRsignout",JiGRbulk:"actions/JiGRbulk",JiGRqueue:"actions/JiGRqueue",JiGRsummary:"actions/JiGRsummary",JiGRwarning:"actions/JiGRwarning",JiGRStats:"actions/JiGRStats",JiGRdiaryWhite:"modules/JiGRdiaryWhite",JiGRstockWhite:"modules/JiGRstockWhite",JiGRuploadWhite:"modules/JiGRuploadWhite",JiGRtemp:"modules/JiGRtemp",JiGRrepairs:"modules/JiGRrepairs",JiGRmenus:"modules/JiGRmenus",JiGRrecipes:"modules/JiGRrecipes",JiGRstocktake:"modules/JiGRstocktake",JiGRadmin2:"modules/JiGRadmin2",JiGRcompliance:"modules/JiGRcompliance",JiGRmenu:"modules/JiGRmenu"};function j(a,b=24){let c=i[a];return c?f(e.UI_ICONS,`${c}.png`,{width:b,height:b,format:"webp",quality:90}):(console.warn(`Icon mapping not found for: ${a}`),function(a,b=24){let c=a.replace(/\.(png|jpg|jpeg|webp|svg)$/i,"");return f(e.UI_ICONS,`${c}.png`,{width:b,height:b,format:"webp",quality:90})}(a,b))}},39727:()=>{},45731:(a,b,c)=>{"use strict";c.d(b,{A:()=>i});var d=c(60687),e=c(43210),f=c(16189),g=c(19281);let h=[{name:"Upload",href:"/upload/console",icon:"/icons/JiGRcamera.png",section:"modules",context:"both",subItems:[{name:"Console",href:"/upload/console",icon:"\uD83D\uDCCA"},{name:"Capture",href:"/upload/capture",icon:"\uD83D\uDCE4"},{name:"Reports",href:"/upload/reports",icon:"\uD83D\uDCCB"},{name:"Training",href:"/upload/training",icon:"\uD83C\uDFAF"}]},{name:"Dashboard",href:"/console/dashboard",icon:"/icons/JiGRdiaryWhite.png",section:"quickActions",context:"console"},{name:"Upload",href:"/console/upload",icon:"/icons/JiGRuploadWhite.png",section:"quickActions",context:"console"},{name:"Reports",href:"/console/reports",icon:"/icons/JiGRcamera.png",section:"quickActions",context:"console"},{name:"Company",href:"/admin/company",icon:"/icons/JiGRadmin.png",section:"quickActions",context:"admin"},{name:"Temperature",href:"/modules/temperature",icon:"/ModuleIcons/JiGRtemps.png",section:"modules",context:"both"},{name:"Analytics",href:"/modules/analytics",icon:"/ModuleIcons/JiGRstock.png",section:"modules",context:"both"},{name:"Settings",href:"/admin/company-settings",icon:"/icons/JiGRadmin.png",section:"settings",context:"both"},{name:"Profile",href:"/admin/profile",icon:"/icons/JiGRadmin.png",section:"settings",context:"both"}];function i({user:a,userClient:b,onSignOut:c,logoUrl:i,activeSection:j,currentUploadPage:k,onBackgroundSelectorToggle:l}){(0,f.usePathname)();let[m,n]=(0,e.useState)(!0),[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(!0),[s,t]=(0,e.useState)(!1);return h.filter(a=>"quickActions"===a.section&&(a.context===j||"both"===a.context)),h.filter(a=>"modules"===a.section&&(a.context===j||"both"===a.context)),h.filter(a=>"settings"===a.section&&(a.context===j||"both"===a.context)),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:`fixed left-0 top-0 h-full bg-black/10 backdrop-blur-xl transition-all duration-5000 ease-in-out z-40 TouchTarget ${m?"w-[150px] shadow-lg":"w-[400px] shadow-[0_0_50px_rgba(0,0,0,0.5)]"} ${s?"AppleSidebar":""}`,onTouchStart:()=>s&&!q&&n(!1),children:[(0,d.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,d.jsx)("div",{className:"flex items-center justify-center",children:(0,d.jsx)("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/30",children:(0,d.jsx)("span",{className:"text-white font-bold text-2xl",children:"C"})})})}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,d.jsx)("div",{className:"flex-1 flex flex-col justify-center py-2",children:(0,d.jsxs)("nav",{className:m?"space-y-2":"space-y-1 px-3",children:[(0,d.jsxs)("button",{onClick:()=>{window.location.href="/upload/capture",setTimeout(()=>{let a=document.querySelector("[data-camera-trigger]");a&&a.click()},500)},className:`flex justify-center items-center py-2 hover:bg-white/10 rounded-lg transition-all duration-200 w-full TouchTarget ${s?"min-h-[44px] px-2":""}`,title:"Quick Camera - Capture documents instantly",children:[(0,d.jsx)("img",{src:(0,g.NO)("JiGRcamera",m?48:64),alt:"Camera",className:m?"w-12 h-12 object-contain":"w-16 h-16 object-contain"}),!m&&(0,d.jsx)("span",{className:"hidden sm:block md:block ml-2 text-white text-sm font-medium",children:"Camera"})]}),(0,d.jsxs)("button",{onClick:()=>{c?c():window.location.href="/signin"},className:`flex justify-center items-center py-2 hover:bg-white/10 rounded-lg transition-all duration-200 w-full TouchTarget ${s?"min-h-[44px] px-2":""}`,title:"Sign Out - End your session safely",children:[(0,d.jsx)("img",{src:(0,g.NO)("JiGRsignout",m?40:48),alt:"Sign Out",className:m?"w-10 h-10 object-contain":"w-12 h-12 object-contain"}),!m&&(0,d.jsx)("span",{className:"hidden sm:block md:block ml-2 text-white text-sm font-medium",children:"Sign Out"})]})]})}),(0,d.jsx)("div",{className:"flex justify-center py-2",children:(0,d.jsx)("div",{className:"w-[60%] h-px bg-white/20"})}),(0,d.jsx)("div",{className:"flex-1 flex flex-col justify-center py-2",children:(0,d.jsx)("nav",{className:m?"space-y-2":"space-y-1 px-3",children:m?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"flex justify-center items-center py-3 cursor-pointer hover:bg-white/10 rounded-lg transition-all duration-200",onClick:()=>n(!1),title:"Click to view modules",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRmodules",48),alt:"Modules",className:"w-12 h-12 object-contain brightness-0 invert",onError:a=>{console.error("Failed to load JiGRmodules.png:",a),a.currentTarget.style.display="none"},onLoad:()=>console.log("JiGRmodules.png loaded successfully")})})}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between py-2 px-2",onMouseLeave:()=>n(!0),children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRmodules",48),alt:"Modules",className:"w-12 h-12 object-contain brightness-0 invert",title:"Modules - Access all application features",onError:a=>{console.error("Failed to load JiGRmodules.png (expanded):",a),a.currentTarget.style.display="none"},onLoad:()=>console.log("JiGRmodules.png (expanded) loaded successfully")})}),(0,d.jsxs)("div",{className:"grid grid-cols-3 grid-rows-3 gap-1",children:[(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRuploadWhite",40),alt:"Upload Module",className:"w-10 h-10 object-contain",title:"Upload Module - Document scanning and processing"})}),(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRstockWhite",40),alt:"Stock Module",className:"w-10 h-10 object-contain opacity-30",title:"Stock Module - Inventory management and tracking"})}),(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRtemp",40),alt:"Temperature Module",className:"w-10 h-10 object-contain opacity-30",title:"Temperature Module - Fridge and freezer monitoring"})}),(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRrepairs",40),alt:"Repairs Module",className:"w-10 h-10 object-contain opacity-30",title:"Repairs Module - Equipment maintenance and repair tracking"})}),(0,d.jsx)("button",{onClick:()=>window.location.href="/admin",className:"flex justify-center items-center p-1 hover:bg-white/10 rounded-lg transition-all duration-200",title:"Admin Module - User management and system settings",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRadmin2",40),alt:"Admin Module",className:"w-10 h-10 object-contain"})}),(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRmenus",40),alt:"Menus Module",className:"w-10 h-10 object-contain opacity-30",title:"Menus Module - Menu management and recipe planning"})}),(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRdiaryWhite",40),alt:"Diary Module",className:"w-10 h-10 object-contain opacity-30",title:"Diary Module - Daily logs and incident reporting"})}),(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRrecipes",40),alt:"Recipes Module",className:"w-10 h-10 object-contain opacity-30",title:"Recipes Module - Recipe management and costing"})}),(0,d.jsx)("div",{className:"flex justify-center items-center p-1",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRstocktake",40),alt:"Stocktake Module",className:"w-10 h-10 object-contain opacity-30",title:"Stocktake Module - Periodic inventory audits"})})]}),(0,d.jsx)("div",{className:"flex-shrink-0 w-12"})]})})})}),(0,d.jsx)("div",{className:"flex justify-center py-2",children:(0,d.jsx)("div",{className:"w-[60%] h-px bg-white/20"})}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0",children:(0,d.jsxs)("div",{className:"pb-4",children:[(0,d.jsxs)("nav",{className:m?"space-y-2":"space-y-1 px-3",children:[(0,d.jsx)("button",{onClick:()=>window.location.href="/admin/company",className:"flex justify-center items-center py-2 hover:bg-white/10 rounded-lg transition-all duration-200 w-full",title:"Admin - Company management and settings",children:(0,d.jsx)("img",{src:(0,g.NO)("JiGRadmin",48),alt:"Admin",className:"w-12 h-12 object-contain"})}),(0,d.jsx)("div",{className:"flex justify-center items-center py-2",children:(0,d.jsx)("div",{className:`bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/30 overflow-hidden flex-shrink-0 w-12 h-12 ${m?"cursor-pointer hover:bg-white/30 transition-all duration-200":""}`,onClick:m?()=>n(!1):void 0,title:m?"Expand Sidebar":"User Profile",children:(0,d.jsx)("span",{className:"text-white font-bold text-lg",children:a?.user_metadata?.full_name?.charAt(0)||a?.email?.charAt(0)||"U"})})})]}),(0,d.jsx)("div",{className:`flex items-center ${m?"justify-center mb-2 mt-4":"justify-center mb-1 mt-8"}`,children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",title:"System Status - All services operational",children:[(0,d.jsx)("div",{className:"w-3 h-3 bg-emerald-400 rounded-full animate-pulse"}),!m&&(0,d.jsx)("span",{className:"text-emerald-300 text-xs font-medium",children:"System Online"})]})}),(0,d.jsx)("div",{className:"text-center mb-4",children:(0,d.jsx)("span",{className:"text-white/30 text-xs font-mono",title:"Application Version - v1.9.4.001",children:"v1.9.4.001"})})]})})]})]}),!m&&(0,d.jsx)("div",{className:`fixed inset-0 bg-black/20 z-30 transition-opacity duration-300 ${o?"md:hidden":"hidden md:block"}`,onClick:()=>n(!0)}),o&&m&&(0,d.jsx)("button",{onClick:()=>n(!1),className:"fixed top-4 left-[160px] z-40 p-2 bg-black/20 backdrop-blur-sm border border-white/30 rounded-lg text-white/60 hover:text-white hover:bg-black/30 transition-all duration-200 md:hidden",title:"Open Menu",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})}},47990:()=>{},66143:(a,b,c)=>{"use strict";c.d(b,{BP:()=>p,HK:()=>m,FX:()=>o,tB:()=>n,supabase:()=>r});var d=c(60463),e=c(29605);let f="https://rggdywqnvpuwssluzfud.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnZ2R5d3FudnB1d3NzbHV6ZnVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzOTIwMTAsImV4cCI6MjA2OTk2ODAxMH0.j1AiBUEfjqVxLu8ARtH5B_DBKI1dg2EKgp_VZtprAzg";if(!f||!g)throw Error("Missing Supabase environment variables. Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.");let h=(0,e.createBrowserClient)(f,g),i=process.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_SERVICE_ROLE_KEY;i&&(0,d.UU)(f,i,{auth:{autoRefreshToken:!1,persistSession:!1}});let j="delivery-dockets",k=new Map,l=async(a,b=3600,c)=>{if(!a||""===a.trim()||"null"===a||"undefined"===a)return"";try{let c,d=a.split("/").pop()||a;console.log("\uD83D\uDD0D Generating signed URL for:",d),console.log("\uD83D\uDD0D Using bucket:",j),console.log("\uD83D\uDD0D Original path:",a);let{data:e,error:f}=await h.storage.from(j).list("",{limit:100});console.log("\uD83D\uDD0D Files in bucket:",e?.map(a=>a.name)||[]),console.log("\uD83D\uDD0D Looking for file:",d);let g=h.storage.from(j).createSignedUrl(d,b),{data:i,error:k}=await (c=g,new Promise((a,b)=>{let d=setTimeout(()=>{b(Error("Timeout after 10000ms"))},1e4);c.then(a).catch(b).finally(()=>clearTimeout(d))}));if(k)return console.error("❌ Signed URL generation failed:",k),"";if(i?.signedUrl)return console.log("✅ Signed URL generated:",i.signedUrl),i.signedUrl;return console.log("❌ No signed URL returned from Supabase"),""}catch(a){return console.error("❌ Signed URL exception:",a),""}},m=async(a,b)=>await l(a,3600,b),n=async(a,b)=>{let{data:c,error:d}=await h.from("client_users").select("role").eq("user_id",a).eq("client_id",b).eq("status","active").single();return d?(console.error("Error fetching user role:",d),null):c?.role||null},o=async(a,b=50)=>{let c=`delivery-records-${a}-${b}`;if(k.has(c))return k.get(c);let d=(async()=>{try{let c=new AbortController,d=setTimeout(()=>c.abort(),3e4),e=await fetch(`/api/delivery-records?clientId=${a}&limit=${b}`,{signal:c.signal});if(clearTimeout(d),!e.ok)throw Error(`HTTP ${e.status}: Failed to fetch delivery records`);let f=await e.json();if(!f.success)throw Error(f.error||"Failed to fetch delivery records");return f.data||[]}catch(b){return b instanceof Error&&"AbortError"===b.name?console.error("⏰ Delivery records request timed out for clientId:",a):console.error("❌ Error fetching delivery records for clientId:",a,b),[]}finally{k.delete(c)}})();return k.set(c,d),d},p=async a=>{let b=`compliance-alerts-${a}`;if(k.has(b))return k.get(b);let c=(async()=>{try{let b=new AbortController,c=setTimeout(()=>b.abort(),3e4),d=await fetch(`/api/compliance-alerts?clientId=${a}`,{signal:b.signal});if(clearTimeout(c),!d.ok)return console.warn("⚠️ Compliance alerts API not configured for demo mode"),[];let e=await d.json();if(!e.success)return[];return e.data||[]}catch(a){return a instanceof Error&&"AbortError"===a.name?console.warn("⏰ Compliance alerts request timed out"):console.warn("⚠️ Compliance alerts not available in demo mode"),[]}finally{k.delete(b)}})();return k.set(b,c),c},q=null;try{let a="https://rggdywqnvpuwssluzfud.supabase.co",b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnZ2R5d3FudnB1d3NzbHV6ZnVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzOTIwMTAsImV4cCI6MjA2OTk2ODAxMH0.j1AiBUEfjqVxLu8ARtH5B_DBKI1dg2EKgp_VZtprAzg",c=process.env.SUPABASE_SERVICE_ROLE_KEY;a&&b&&(q=(0,d.UU)(a,b,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"hospitality-compliance-auth"}})),a&&c&&(0,d.UU)(a,c,{auth:{autoRefreshToken:!1,persistSession:!1}})}catch(a){console.warn("Supabase client initialization failed:",a instanceof Error?a.message:"Unknown error")}let r=q;console.log("\uD83D\uDE80 Database Core lib loaded - Modular Architecture v1.8.19")},95216:(a,b,c)=>{"use strict";c.d(b,{LE:()=>d.getUserClient});var d=c(96711);c(14038)},96711:(a,b,c)=>{"use strict";async function d(){try{let{getAuthenticationCore:a}=await c.e(7947).then(c.bind(c,47947)),b=a();if(b.isLoaded&&b.isActive)return b.getCapabilityInterface("authentication")}catch(a){console.warn("⚠️ Authentication Core not available, falling back to legacy:",a)}try{return await Promise.resolve().then(c.bind(c,14038))}catch(a){throw console.error("❌ Both modular and legacy auth systems unavailable:",a),a}}async function e(){try{let a=await Promise.resolve().then(c.bind(c,14038));return await a.getProfileManagementCapability()}catch(a){console.warn("⚠️ Profile Management not available from legacy, trying core module");try{let{getAuthenticationCore:a}=await c.e(7947).then(c.bind(c,47947)),b=a();if(b.isLoaded&&b.isActive)return b.getCapabilityInterface("profile-management")}catch(a){console.warn("⚠️ Profile Management not available from core module")}}try{let a=await Promise.resolve().then(c.bind(c,14038));return{getUserProfile:a.getUserClient,updateUserProfile:a.updateUserProfile||(()=>Promise.resolve({success:!1,error:"Not implemented in legacy"}))}}catch(a){throw console.error("❌ Profile management unavailable:",a),a}}async function f(a){try{let b=await d();if(b.getUserClient)return await b.getUserClient(a);if(b.default?.getUserClient)return await b.default.getUserClient(a);if("object"==typeof b&&b.getUserClient)return await b.getUserClient(a);return console.error("❌ getUserClient function not found in auth capability"),null}catch(b){console.error("❌ Error in bridged getUserClient:",b);try{let b=await Promise.resolve().then(c.bind(c,14038));return await b.getUserClient(a)}catch(a){return console.error("❌ Legacy fallback failed:",a),null}}}async function g(a){try{let b=await d();if(b.createUserClient)return await b.createUserClient(a);let e=await Promise.resolve().then(c.bind(c,14038));if(e.createUserClient)return await e.createUserClient(a);return{success:!1,error:"createUserClient not available"}}catch(a){return console.error("❌ Error in bridged createUserClient:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function h(a,b){try{let c=await e();if(c.updateUserProfile)return await c.updateUserProfile(a,b);return{success:!1,error:"updateUserClient not available"}}catch(a){return console.error("❌ Error in bridged updateUserClient:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function i(a){try{let b=await d();if(b.getUserPermissions)return await b.getUserPermissions(a);let c=await f(a);return c?.permissions||[]}catch(a){return console.error("❌ Error in bridged getUserPermissions:",a),[]}}async function j(a,b){try{let c=await i(a);return c.includes(b)||c.includes("*")}catch(a){return console.error("❌ Error checking permission:",a),!1}}async function k(a,b){try{let e=await d();if(e.signIn)return await e.signIn(a,b);let f=await Promise.resolve().then(c.bind(c,14038));if(f.signInUser)return await f.signInUser(a,b);return{success:!1,error:"Sign in functionality not available"}}catch(a){return console.error("❌ Error in bridged signInUser:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function l(){try{let a=await d();if(a.signOut)return await a.signOut();let b=await Promise.resolve().then(c.bind(c,14038));if(b.signOutUser)return await b.signOutUser();return{success:!1,error:"Sign out functionality not available"}}catch(a){return console.error("❌ Error in bridged signOutUser:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function m(){try{let a=await d();if(a.getCurrentUser)return await a.getCurrentUser();let{supabase:b}=await Promise.resolve().then(c.bind(c,66143)),{data:{user:e}}=await b.auth.getUser();return e}catch(a){return console.error("❌ Error in bridged getCurrentUser:",a),null}}async function n(){try{let{getAuthenticationCore:a}=await c.e(7947).then(c.bind(c,47947)),b=a();if(b.isLoaded&&b.isActive)return b.getCapabilityInterface("team-management")}catch(a){console.warn("⚠️ Team Management not available from module")}return{getTeamMembers:async a=>{try{let b=await Promise.resolve().then(c.bind(c,14038));return await b.getTeamMembers(a)}catch(a){return[]}},addTeamMember:async(a,b)=>({success:!1,error:"Team management not available in legacy mode"}),removeTeamMember:async(a,b)=>({success:!1,error:"Team management not available in legacy mode"})}}async function o(a){try{let b=await n();return await b.getTeamMembers(a)}catch(a){return console.error("❌ Error getting team members:",a),[]}}async function p(a,b){try{let c=await n();return await c.addTeamMember(a,b)}catch(a){return console.error("❌ Error adding team member:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function q(a,b){try{let c=await n();return await c.removeTeamMember(a,b)}catch(a){return console.error("❌ Error removing team member:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function r(){try{let{getAuthenticationCore:a}=await c.e(7947).then(c.bind(c,47947)),b=a();return b.isLoaded&&b.isActive}catch(a){return!1}}async function s(){try{if(!await r())return{usingModular:!1,capabilities:["basic-auth","user-client"],healthStatus:"degraded"};{let{getAuthenticationCore:a}=await c.e(7947).then(c.bind(c,47947)),b=a();return{usingModular:!0,capabilities:b.manifest.provides.map(a=>a.name),healthStatus:b.isActive?"healthy":"degraded"}}}catch(a){return{usingModular:!1,capabilities:[],healthStatus:"unavailable"}}}c.r(b),c.d(b,{addTeamMember:()=>p,createUserClient:()=>g,default:()=>t,getAuthSystemStatus:()=>s,getCurrentUser:()=>m,getTeamMembers:()=>o,getUserClient:()=>f,getUserPermissions:()=>i,hasPermission:()=>j,isModularAuthAvailable:()=>r,removeTeamMember:()=>q,signInUser:()=>k,signOutUser:()=>l,updateUserClient:()=>h});let t={getUserClient:f,createUserClient:g,updateUserClient:h,getUserPermissions:i,hasPermission:j,signInUser:k,signOutUser:l,getCurrentUser:m,getTeamMembers:o,addTeamMember:p,removeTeamMember:q,isModularAuthAvailable:r,getAuthSystemStatus:s}}};